ifndef TARG
here = $(shell pwd)
bottom = $(shell basename $(here))
TARG = $(bottom)
endif

MMIXAL = mmixal
SRC_SUFF = mms
OBJ_SUFF = mmo
## LST_SUFF = map
LST_SUFF = lst

all: $(TARG).$(OBJ_SUFF)

$(TARG).$(OBJ_SUFF):$(TARG).$(SRC_SUFF)
	$(MMIXAL) -l $(TARG).$(LST_SUFF) -o $(TARG).$(OBJ_SUFF) $(TARG).$(SRC_SUFF)

clean:
	rm -f *.$(LST_SUFF) *.$(OBJ_SUFF)

